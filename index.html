<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QuizoPolsce</title>
<style>
body{
  background:#000;
  color:#fff;
  font-family:Arial, sans-serif;
  margin:0;
  padding:0;
  text-align:center;
  overflow-x:hidden;
}
#quizBox{ max-width:600px; margin:auto; padding:20px; }
.btn{
  background:#111;
  border:2px solid #0ff;
  padding:12px;
  margin:10px 0;
  cursor:pointer;
  border-radius:12px;
  transition:0.2s;
}
.btn:hover{ background:#0ff; color:#000; }
.good{ background:#00ff84 !important; color:#000; }
.bad{ background:#ff0055 !important; color:#fff; }

#adTop,#adBottom,#adMid,#adFinal{
  display:none;
  justify-content:center;
  align-items:center;
  padding:10px;
}
#adTop{ background:#111; }
#adBottom{ background:#111; }
#adMid{ background:#222; height:120px; }
#adFinal{ background:#222; height:140px; }

#final{
  display:none;
  position:fixed;
  top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.9);
  justify-content:center;
  align-items:center;
  flex-direction:column;
}
#fx{
  position:fixed;
  top:0;left:0;width:100vw;height:100vh;
  pointer-events:none;
}
</style>
</head>
<body>

<canvas id="fx"></canvas>

<div id="quizBox">
  <h2 id="question">Ładowanie…</h2>
  <div id="answers"></div>

  <div id="progress"></div>
  <div>Punkty: <span id="points">0</span></div>

  <div id="adTop">[Reklama top]</div>
  <div id="adMid">[Reklama mid — po 7 pytaniu]</div>
  <div id="adBottom">[Reklama dół]</div>
  <div id="adFinal">[Reklama przed wynikiem]</div>
</div>

<div id="final">
  <h1 id="finalText"></h1>
  <button id="retryBtn" class="btn">Spróbuj ponownie</button>
  <button id="shareBtn" class="btn">Udostępnij</button>
  <button id="endBtn" class="btn">Zakończ</button>
  <div id="msgBox" style="display:none;margin-top:10px;"></div>
</div>

<audio id="bg" src="bg.mp3" loop></audio>
<audio id="ding" src="ding.mp3"></audio>
<audio id="buzzer" src="buzzer.mp3"></audio>
<audio id="fanfare" src="fanfare.mp3"></audio>

<script>
function $(id){ return document.getElementById(id); }

const questionEl=$('question');
const answersEl=$('answers');
const progressEl=$('progress');
const pointsEl=$('points');

const adTop=$('adTop');
const adBottom=$('adBottom');
const adMid=$('adMid');
const adFinal=$('adFinal');

const finalEl=$('final');
const finalText=$('finalText');

const bg=$('bg');
const ding=$('ding');
const buzzer=$('buzzer');
const fanfare=$('fanfare');
</script>

<script>
const QUESTIONS=[
  { q:"Stolica Polski?", a:["Warszawa","Kraków","Gdańsk","Wrocław"], correct:0 },
  { q:"Największy polski port morski?", a:["Gdańsk","Gdynia","Szczecin","Świnoujście"], correct:0 },
  { q:"Największe miasto na południu Polski?", a:["Kraków","Wrocław","Katowice","Łódź"], correct:0 },
  { q:"Polska jest członkiem NATO od?", a:["1999","2004","1990","2001"], correct:0 },
  { q:"Polski skoczek narciarski z wieloma medalami olimpijskimi?", a:["Adam Małysz","Kamil Stoch","Piotr Żyła","Andrzej Stękała"], correct:0 },
  { q:"Największe miasto woj. mazowieckiego?", a:["Warszawa","Radom","Płock","Siedlce"], correct:0 },
  { q:"Najważniejszy polski noblista w dziedzinie chemii?", a:["Maria Skłodowska-Curie","Jan Czochralski","Michał Kalecki","Stefan Banach"], correct:0 },
  { q:"Najdłuższa rzeka w Polsce?", a:["Wisła","Odra","Warta","Bug"], correct:0 },
  { q:"Najwyższy szczyt w Polsce?", a:["Rysy","Śnieżka","Giewont","Babia Góra"], correct:0 },
  { q:"W którym roku Polska odzyskała niepodległość?", a:["1918","1945","1914","1939"], correct:0 },
  { q:"Polski orzeł jest symbolem?", a:["Godła","Flagi","Hymnu","Herbu miasta"], correct:0 },
  { q:"Największe miasto na Śląsku?", a:["Katowice","Gliwice","Częstochowa","Bytom"], correct:0 },
  { q:"Polski hymn zaczyna się od słów?", a:["Jeszcze Polska nie zginęła","Mazurka Dąbrowskiego","Bogurodzicy","Roty"], correct:0 },
  { q:"Polski król zwany „Lwem Lechistanu”?", a:["Kazimierz Wielki","Bolesław Chrobry","Zygmunt Stary","Władysław Jagiełło"], correct:0 }
];

let points=0, current=0;
function getRandomSession(){ return QUESTIONS.map((q,i)=>({q,i})).sort(()=>Math.random()-0.5).slice(0,14).map(o=>o.i); }
let sessionQuestions=getRandomSession();

if('serviceWorker' in navigator){ navigator.serviceWorker.register('/sw.js').catch(()=>{}); }

function playAudio(audio){ audio.play().catch(()=>{}); }
document.addEventListener('DOMContentLoaded',()=>{ playAudio(bg); });
document.body.addEventListener('click',()=>{ playAudio(bg); playAudio(ding); playAudio(buzzer); playAudio(fanfare); },{once:true});

function showQuestion(){
  if(current===7){
    adTop.style.display='none'; adBottom.style.display='none'; adMid.style.display='flex';
    questionEl.textContent="Oglądaj reklamę, aby kontynuować";
    answersEl.innerHTML="";
    setTimeout(()=>{ adMid.style.display='none'; current++; showQuestion(); },15000);
    return;
  }
  if(current>=sessionQuestions.length){
    adTop.style.display='none'; adBottom.style.display='none'; adMid.style.display='none'; adFinal.style.display='flex';
    questionEl.textContent="Oglądaj reklamę, aby zobaczyć wynik";
    answersEl.innerHTML="";
    setTimeout(()=>{ adFinal.style.display='none'; finishQuiz(); },15000);
    return;
  }
  adTop.style.display='flex'; adBottom.style.display='flex'; adMid.style.display='none'; adFinal.style.display='none';

  const idx=sessionQuestions[current];
  const q=QUESTIONS[idx];
  questionEl.textContent=q.q;
  answersEl.innerHTML='';
  const shuffled=q.a.map((ans,i)=>({ans,i})).sort(()=>Math.random()-0.5);
  shuffled.forEach(obj=>{
    const b=document.createElement('div');
    b.className='btn';
    b.textContent=obj.ans;
    b.onclick=()=>answer(obj.i,b,idx);
    answersEl.appendChild(b);
  });
  progressEl.textContent=`Pytanie ${current+1}/${sessionQuestions.length}`;
}

function answer(idxAnswer,btn,questionIndex){
  const correct=QUESTIONS[questionIndex].correct;
  if(idxAnswer===correct){ btn.classList.add('good'); ding.play().catch(()=>{}); setTimeout(fireworkAnswer,500); points++; }
  else{ btn.classList.add('bad'); buzzer.play().catch(()=>{}); }
  pointsEl.textContent=points;
  current++;
  setTimeout(showQuestion,400);
}

function finishQuiz(){ finalText.textContent=`${points} pkt`; finalEl.style.display='flex'; setTimeout(fireworkFinal,500); }

$('retryBtn').onclick = ()=>{ points=0; current=0; pointsEl.textContent='0'; sessionQuestions=getRandomSession(); finalEl.style.display='none'; showQuestion(); };
$('shareBtn').onclick = ()=>{ const url=location.href; if(navigator.share){ navigator.share({title:'QuizoPolsce',text:'Zagraj w QuizoPolsce — sprawdź wiedzę o Polsce!',url }).catch(()=>{}); } else{ navigator.clipboard?.writeText(url).then(()=>{ const msg=$('msgBox'); msg.textContent='Link skopiowany do schowka'; msg.style.display='block'; setTimeout(()=>msg.style.display='none',2000); }).catch(()=>{ alert('Skopiuj link: '+url); }); } };
$('endBtn').onclick = ()=>{ finalEl.style.display='none'; };

let fireworkRunning = false;
function firework(){ if(fireworkRunning) return; fireworkRunning = true; const canvas=$('fx'), ctx=canvas.getContext('2d'); canvas.width=window.innerWidth; canvas.height=window.innerHeight; const particles=[]; const colors=['#ff3fc4','#00f0ff','#16d36a','#ffd27a','#ff5c6c','#ff8a00','#a020f0','#00ff90']; const bursts=3+Math.floor(Math.random()*3); for(let b=0;b<bursts;b++){ const x=Math.random()*canvas.width, y=Math.random()*canvas.height*0.5; for(let i=0;i<40;i++){ particles.push({x,y,vx:(Math.random()-0.5)*10,vy:(Math.random()-0.5)*10,alpha:1,color:colors[Math.floor(Math.random()*colors.length)],size:2+Math.random()*2}); } } function animate(){ ctx.fillStyle='rgba(0,0,0,0.1)'; ctx.fillRect(0,0,canvas.width,canvas.height); for(let i=particles.length-1;i>=0;i--){ const p=particles[i]; ctx.fillStyle=p.color; ctx.globalAlpha=p.alpha; ctx.beginPath(); ctx.arc(p.x,p.y,p.size,0,2*Math.PI); ctx.fill(); p.x+=p.vx; p.y+=p.vy; p.vy+=0.1; p.alpha-=0.02; if(p.alpha<=0) particles.splice(i,1); } if(particles.some(p=>p.alpha>0)) requestAnimationFrame(animate); else { ctx.clearRect(0,0,canvas.width,canvas.height); fireworkRunning=false; } } animate(); }
function fireworkAnswer(){ firework(); }
function fireworkFinal(){ firework(); }

showQuestion();
</script>

<!-- ⭐⭐ MONETAG POPUNDER (TWOJA WYBRANA REKLAMA) ⭐⭐ -->
<script>
(function(s){
    s.dataset.zone='10304695';
    s.src='https://al5sm.com/tag.min.js';
})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')));
</script>

</body>
</html>
