<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>QuizoPolsce</title>

<style>
:root{
--bg:#071025;--card:#0b1220;--txt:#e6f7ff;--muted:#9fb6d6;
--n1:#00f0ff;--n2:#ff3fc4;--good:#16d36a;--bad:#ff5c6c;--accent:#ffd27a;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;font-family:system-ui;background:var(--bg);color:var(--txt)}
body{display:flex;justify-content:center;padding:12px}
.page{width:100%;max-width:520px;margin-top:120px}
.card{background:var(--card);border-radius:14px;padding:22px}
.top{display:flex;justify-content:space-between}
.title{font-weight:800;color:var(--n1)}
.score{font-weight:700;color:var(--accent)}
.question{text-align:center;font-size:1.3rem;margin:20px 0}
.answers{display:grid;grid-template-columns:1fr 1fr;gap:10px}
@media(max-width:450px){.answers{grid-template-columns:1fr}}
.btn{padding:14px;border-radius:12px;font-weight:800;color:#fff;
background:linear-gradient(90deg,var(--n1),var(--n2));cursor:pointer;text-align:center}
.btn.good{background:linear-gradient(90deg,var(--good),#8df3b0)}
.btn.bad{background:linear-gradient(90deg,var(--bad),#ff8a94)}
.full{position:fixed;inset:0;background:#020814ee;display:flex;align-items:center;justify-content:center;z-index:10}
.box{background:#081322;padding:30px;border-radius:14px;text-align:center;width:90%;max-width:360px}
input{width:100%;padding:14px;border-radius:12px;border:2px solid var(--n1);
background:#050c18;color:#fff;margin-bottom:18px;text-align:center}
#ad{text-align:center;margin-top:20px}
canvas{position:fixed;inset:0;pointer-events:none;z-index:1}
</style>

<script>
window.monetag = window.monetag || { queue: [] };
</script>
<script async src="https://btloader.com/tag?o=5688917489764352&upapi=true"></script>
</head>

<body>

<canvas id="fx"></canvas>
<audio id="bg" loop src="sounds/background.mp3"></audio>
<audio id="ok" src="sounds/ding.mp3"></audio>
<audio id="bad" src="sounds/buzzer.mp3"></audio>

<div class="page">

<div id="start" class="full">
  <div class="box">
    <h1 style="color:var(--n2)">QuizoPolsce</h1>
    <input id="nick" placeholder="Twój nick">
    <div class="btn" id="startBtn">START</div>
  </div>
</div>

<div id="quiz" style="display:none">
  <div class="card">
    <div class="top">
      <div class="title">QuizoPolsce</div>
      <div class="score">PKT: <span id="pts">0</span></div>
    </div>

    <div id="q" class="question"></div>
    <div id="a" class="answers"></div>

    <div id="ad"></div>
    <div id="prog" style="font-size:.8rem;color:var(--muted)"></div>
  </div>
</div>

<div id="final" class="full" style="display:none">
  <div class="box">
    <h1 style="color:var(--n2)">KONIEC</h1>
    <div id="finalScore" style="font-size:2rem;color:var(--accent)"></div>
    <div class="btn" onclick="location.reload()">Zagraj ponownie</div>
  </div>
</div>

</div>

<script>
const Q=[
{q:"Stolica Polski?",a:["Warszawa","Kraków","Gdańsk","Wrocław"],c:0},
{q:"Największy port?",a:["Gdańsk","Gdynia","Szczecin","Świnoujście"],c:0},
{q:"Miasto południa?",a:["Kraków","Wrocław","Katowice","Łódź"],c:0},
{q:"NATO od?",a:["1999","2004","1990","2001"],c:0},
{q:"Skoczek z medalami?",a:["Adam Małysz","Kamil Stoch","Żyła","Stękała"],c:1},
{q:"Mazowieckie?",a:["Warszawa","Radom","Płock","Siedlce"],c:0},
{q:"Noblistka?",a:["Curie","Czochralski","Banach","Kalecki"],c:0},
{q:"Najdłuższa rzeka?",a:["Wisła","Odra","Warta","Bug"],c:0},
{q:"Najwyższy szczyt?",a:["Rysy","Śnieżka","Giewont","Babia"],c:0},
{q:"Niepodległość?",a:["1918","1945","1914","1939"],c:0},
{q:"Orzeł to?",a:["Godło","Flaga","Hymn","Herb"],c:0},
{q:"Śląsk?",a:["Katowice","Gliwice","Bytom","Zabrze"],c:0},
{q:"Hymn?",a:["Mazurek","Bogurodzica","Rota","Oda"],c:0},
{q:"Król?",a:["Sobieski","Jagiełło","Zygmunt","Chrobry"],c:0}
];

let i=0,pts=0,ad7=false,ad14=false;

const ad=document.getElementById("ad");
const s=document.createElement("script");
s.dataset.zone="10526457";
s.src="https://nap5k.com/tag.min.js";
ad.appendChild(s);

function shuffle(q){
 let a=q.a.map((t,i)=>({t,i}));
 for(let i=a.length-1;i>0;i--){
  let j=Math.floor(Math.random()*(i+1));
  [a[i],a[j]]=[a[j],a[i]];
 }
 return {a:a.map(x=>x.t),c:a.findIndex(x=>x.i===q.c)};
}

function adSafe(format,zone){
 (function wait(){
  if(window.monetag && monetag.queue){
   monetag.queue.push({format:format,zoneId:zone});
  } else setTimeout(wait,100);
 })();
}

startBtn.onclick=()=>{
 start.style.display="none";
 quiz.style.display="block";
 bg.play().catch(()=>{});
 show();
};

function show(){
 if(i>=Q.length)return end();
 let q=shuffle(Q[i]);
 document.getElementById("q").textContent=Q[i].q;
 a.innerHTML="";
 prog.textContent=`Pytanie ${i+1}/14`;

 q.a.forEach((t,idx)=>{
  let b=document.createElement("div");
  b.className="btn";
  b.textContent=t;
  b.onclick=()=>{
   if(idx===q.c){pts++;b.classList.add("good");ok.play();fire();}
   else{b.classList.add("bad");bad.play();}
   ptsEl.textContent=pts;

   if(i+1===7&&!ad7){ad7=true;adSafe("vignette",10523625);}
   if(i+1===14&&!ad14){ad14=true;adSafe("popunder",10580761);}

   i++;setTimeout(show,700);
  };
  a.appendChild(b);
 });
}

function end(){
 quiz.style.display="none";
 final.style.display="flex";
 finalScore.textContent=`${pts} pkt`;
 fire();
}

function fire(){
 let c=fx,x=c.getContext("2d");
 c.width=innerWidth;c.height=innerHeight;
 let p=[];
 for(let i=0;i<60;i++)p.push({x:Math.random()*c.width,y:Math.random()*c.height,
 vx:(Math.random()-.5)*6,vy:(Math.random()-.5)*6,a:1});
 (function a(){
  x.clearRect(0,0,c.width,c.height);
  p.forEach(o=>{x.globalAlpha=o.a;x.fillRect(o.x,o.y,3,3);
   o.x+=o.vx;o.y+=o.vy;o.a-=.02;});
  p=p.filter(o=>o.a>0);
  if(p.length)requestAnimationFrame(a);
 })();
}
</script>
</body>
</html>
