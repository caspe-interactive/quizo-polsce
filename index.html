<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Quiz o Polsce</title>

  <style>
    body{
      margin:0;
      font-family:Arial;
      background:#000;
      color:#fff;
      text-align:center;
    }
    #quizBox{
      max-width:600px;
      margin:0 auto;
      padding:20px;
    }
    .btn{
      background:#111;
      border:2px solid #0ff;
      padding:10px;
      margin:10px 0;
      border-radius:10px;
      cursor:pointer;
      transition:0.2s;
    }
    .btn:hover{
      background:#033;
    }
    #adTop, #adBottom, #adMid, #adFinal{
      width:100%;
      min-height:70px;
      display:none;
      justify-content:center;
      align-items:center;
      background:#111;
      margin:10px 0;
      border:1px solid #333;
    }
    #resultBox{ display:none; }
  </style>
</head>

<body>

<div id="quizBox">

  <!-- REKLAMA GÓRA -->
  <div id="adTop"></div>

  <h2 id="question"></h2>
  <div id="answers"></div>
  <div id="progress"></div>

  <!-- REKLAMA ŚRODEK (przed 7 pytaniem) -->
  <div id="adMid"></div>

  <!-- REKLAMA DÓŁ -->
  <div id="adBottom"></div>

  <!-- REKLAMA PRZED WYNIKIEM -->
  <div id="adFinal"></div>

  <div id="resultBox">
    <h2>Twój wynik:</h2>
    <div id="score"></div>
    <button class="btn" onclick="location.reload()">Zagraj ponownie</button>
  </div>

</div>

<script>
/* ------------------------------------------------------
   PYTANIA – WSTAWIAM PEŁNY FORMAT, PRZYKŁADOWE 12
------------------------------------------------------ */
const QUESTIONS=[
  {q:"Najwyższa góra w Polsce to?",a:["Rysy","Giewont","Kasprowy"],c:0},
  {q:"Stolicą Polski jest?",a:["Kraków","Warszawa","Gdańsk"],c:1},
  {q:"Najdłuższa rzeka w Polsce?",a:["Wisła","Odra","Warta"],c:0},
  {q:"Morze przy Polsce?",a:["Czarne","Śródziemne","Bałtyckie"],c:2},
  {q:"Godło Polski przedstawia?",a:["Orła","Lwa","Sokoła"],c:0},
  {q:"Flaga Polski ma kolory:",a:["Biały-czerwony","Niebieski-żółty","Czarny-żółty"],c:0},
  {q:"Największe jezioro?",a:["Śniardwy","Mamry","Hańcza"],c:0},
  {q:"Waluta Polski?",a:["Euro","Złoty","Dolar"],c:1},
  {q:"Największe miasto?",a:["Kraków","Łódź","Warszawa"],c:2},
  {q:"Najstarsze miasto?",a:["Gniezno","Poznań","Torun"],c:0},
  {q:"Najwyższe Tatry są w?",a:["Sudety","Karpaty","Bieszczady"],c:1},
  {q:"Port w Polsce?",a:["Zakopane","Gdynia","Opole"],c:1}
];

/* ------------------------------------------------------
   ELEMENTY
------------------------------------------------------ */
const questionEl=document.getElementById("question");
const answersEl=document.getElementById("answers");
const progressEl=document.getElementById("progress");
const scoreEl=document.getElementById("score");
const resultBox=document.getElementById("resultBox");

const adTop=document.getElementById("adTop");
const adBottom=document.getElementById("adBottom");
const adMid=document.getElementById("adMid");
const adFinal=document.getElementById("adFinal");

let points=0;
let current=0;

// Losujemy 12 pytań
const sessionQuestions=QUESTIONS
  .map((q,i)=>({q,i}))
  .sort(()=>Math.random()-0.5)
  .slice(0,12)
  .map(o=>o.i);

/* ------------------------------------------------------
   FUNKCJA ŁADUJĄCA REKLAMY MONETAG ASYNCHRONICZNIE
------------------------------------------------------ */
function insertMonetagAsync(container, zone){
  if(!container || container.dataset.monetagInserted==="1") return;

  try{
    const s=document.createElement("script");
    s.src="https://groleegni.net/vignette.min.js?zone="+zone;
    s.async=true;
    s.onerror=()=>console.warn("Monetag błąd:",zone);
    s.onload=()=>console.log("Monetag OK:",zone);
    container.appendChild(s);
    container.dataset.monetagInserted="1";
  }catch(e){
    console.warn("Insert fail", e);
  }
}

/* ------------------------------------------------------
   WSTAWIAMY 4 REKLAMY
------------------------------------------------------ */
insertMonetagAsync(adTop,'10241819');     // GÓRA
insertMonetagAsync(adBottom,'10241836');  // DÓŁ
insertMonetagAsync(adMid,'10241826');     // PRZED 7 PYT.
insertMonetagAsync(adFinal,'10241843');   // PRZED WYNIKIEM

/* ------------------------------------------------------
   LOGIKA QUIZU
------------------------------------------------------ */
function showQuestion(){
  if(current>=sessionQuestions.length){
    finishQuiz();
    return;
  }

  const idx=sessionQuestions[current];
  const q=QUESTIONS[idx];

  questionEl.textContent=q.q;
  answersEl.innerHTML="";
  progressEl.textContent=`Pytanie ${current+1}/12`;

  // Odpowiedzi losowe
  const shuffled=q.a.map((ans,i)=>({ans,i}))
    .sort(()=>Math.random()-0.5);

  shuffled.forEach(obj=>{
    const b=document.createElement("div");
    b.className="btn";
    b.textContent=obj.ans;
    b.onclick=()=>answer(obj.i, idx);
    answersEl.appendChild(b);
  });

  // Reklama przed 7 pytaniem – nie blokuje quizu
  if(current===6){
    adMid.style.display="flex";
    setTimeout(()=>adMid.style.display="none", 12000);
  } else {
    adMid.style.display="none";
  }

  adTop.style.display="flex";
  adBottom.style.display="flex";
}

function answer(choice, idx){
  if(choice===QUESTIONS[idx].c) points++;

  current++;
  showQuestion();
}

function finishQuiz(){
  adTop.style.display="none";
  adBottom.style.display="none";
  adMid.style.display="none";

  adFinal.style.display="flex"; // Reklama przed wynikiem
  setTimeout(()=>{
    adFinal.style.display="none";
    questionEl.style.display="none";
    answersEl.style.display="none";
    progressEl.style.display="none";
    resultBox.style.display="block";
    scoreEl.textContent=points+" / 12";
  },5000);
}

showQuestion();
</script>

</body>
</html>
