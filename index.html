<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>QuizoPolsce — Sprawdź wiedzę o Polsce</title>
<style>
:root{
  --bg:#071025; --card:#0b1220; --text:#e6f7ff; --neon1:#00f0ff; --neon2:#ff3fc4;
  --good:#16d36a; --bad:#ff5c6c; --accent:#ffd27a; --radius:14px;
}
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:var(--bg);color:var(--text);}
.page{width:100%;max-width:920px;margin:auto;padding:20px;text-align:center;}
.card{background:var(--card);border-radius:var(--radius);padding:22px;box-shadow:0 10px 40px rgba(0,0,0,0.6);}
.btn{padding:12px;border-radius:12px;margin:8px 0;cursor:pointer;font-weight:800;color:white;
     background:linear-gradient(90deg,var(--neon1),var(--neon2));transition:.2s;}
.btn:hover{transform:scale(1.03);}
.btn.good{background:linear-gradient(90deg,var(--good),#8df3b0);}
.btn.bad{background:linear-gradient(90deg,var(--bad),#ff8a94);}
#adTop,.adMid,.adBottom,.adFinal{background:#111;color:white;padding:12px;margin:10px 0;border-radius:12px; display:flex; justify-content:center; align-items:center;}
#final{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.9);color:var(--text);justify-content:center;align-items:center;flex-direction:column;}
#finalText{font-size:2.2rem;margin:20px;}
canvas{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:50;}
</style>
</head>
<body>
<canvas id="fx"></canvas>
<div class="page">
  <div id="adTop" class="adTop">ładowanie reklamy...</div>
  <div class="card" id="quizCard">
    <h1>QuizoPolsce</h1>
    <div id="nickWrap"><input id="nick" placeholder="Twój nick" style="padding:10px;border-radius:8px;"></div>
    <div id="question" style="font-size:1.4rem;margin:12px 0;">Ładowanie...</div>
    <div id="answers"></div>
    <div id="adMid" class="adMid" style="display:none;">ładowanie reklamy...</div>
    <div id="adBottom" class="adBottom">ładowanie reklamy...</div>
  </div>
</div>

<div id="final">
  <div id="finalText">0 pkt</div>
  <button class="btn" id="retryBtn">Spróbuj jeszcze raz</button>
  <button class="btn" id="shareBtn">Poleć quiz</button>
  <button class="btn" id="endBtn">Koniec</button>
  <div id="adFinal" class="adFinal" style="display:none;">ładowanie reklamy...</div>
</div>

<audio id="bg" loop src="background.mp3"></audio>
<audio id="snd-ding" src="ding.mp3"></audio>
<audio id="snd-buzzer" src="buzzer.mp3"></audio>

<script>
// --- PopAds loader ---
(function(){
  var e=window,q="d31a1dee2b6abd0ee20b164c660efc53";
  var b=[["siteId",YOUR_SITE_ID],["minBid",0],["popundersPerIP","0"],["delayBetween",0],
         ["default",false],["defaultPerDay",0],["topmostLayer","auto"]];
  try{Object.freeze(e[q]=b);}catch(e){}
  var c=["https://d3d3.cdn4ads.com/your_popads_script.js"];
  var i=-1,j,r;
  function z(){clearTimeout(j);i++;if(c[i]){r=e.document.createElement("script");r.type="text/javascript";r.async=true;r.src=c[i];r.crossOrigin="anonymous";r.onerror=z;document.head.appendChild(r);} j=setTimeout(z,5000);}
  z();
})();

// --- Quiz logic ---
const $=id=>document.getElementById(id);
const QUESTIONS=[
  { q:"Stolica Polski?", a:["Warszawa","Kraków","Gdańsk","Wrocław"], correct:0 },
  { q:"Największy polski port morski?", a:["Gdańsk","Gdynia","Szczecin","Świnoujście"], correct:0 },
  { q:"Największe miasto na południu Polski?", a:["Kraków","Wrocław","Katowice","Łódź"], correct:0 },
  { q:"Polska jest członkiem NATO od?", a:["1999","2004","1990","2001"], correct:0 },
  { q:"Polski skoczek narciarski z wieloma medalami olimpijskimi?", a:["Adam Małysz","Kamil Stoch","Piotr Żyła","Andrzej Stękała"], correct:0 },
  { q:"Największe miasto woj. mazowieckiego?", a:["Warszawa","Radom","Płock","Siedlce"], correct:0 },
  { q:"Najważniejszy polski noblista w dziedzinie chemii?", a:["Maria Skłodowska-Curie","Jan Czochralski","Michał Kalecki","Stefan Banach"], correct:0 },
  { q:"Najdłuższa rzeka w Polsce?", a:["Wisła","Odra","Warta","Bug"], correct:0 },
  { q:"Najwyższy szczyt w Polsce?", a:["Rysy","Śnieżka","Giewont","Babia Góra"], correct:0 },
  { q:"W którym roku Polska odzyskała niepodległość?", a:["1918","1945","1914","1939"], correct:0 },
  { q:"Polski orzeł jest symbolem?", a:["Godła","Flagi","Hymnu","Herbu miasta"], correct:0 },
  { q:"Największe miasto na Śląsku?", a:["Katowice","Gliwice","Częstochowa","Bytom"], correct:0 },
  { q:"Polski hymn zaczyna się od słów?", a:["Jeszcze Polska nie zginęła","Mazurka Dąbrowskiego","Bogurodzicy","Roty"], correct:0 },
  { q:"Polski król zwany „Lwem Lechistanu”?", a:["Kazimierz Wielki","Bolesław Chrobry","Zygmunt Stary","Władysław Jagiełło"], correct:0 }
];

let points=0,current=0;
let sessionQuestions=QUESTIONS.map((q,i)=>i).sort(()=>Math.random()-0.5);

document.body.addEventListener('click',()=>{if($.bg.paused)$.bg.play().catch(()=>{});},{once:true});

function showQuestion(){
  const questionEl=$.question,answersEl=$.answers;
  const adTop=$.adTop,adBottom=$.adBottom,adMid=$.adMid,adFinal=$.adFinal;

  if(current===7){ // środkowa reklama
    adTop.style.display='none'; adBottom.style.display='none'; adMid.style.display='flex';
    questionEl.textContent="Oglądaj reklamę, aby kontynuować"; answersEl.innerHTML="";
    setTimeout(()=>{ adMid.style.display='none'; current++; showQuestion(); },15000); return;
  }
  if(current>=sessionQuestions.length){
    adTop.style.display='none'; adBottom.style.display='none'; adMid.style.display='none'; adFinal.style.display='flex';
    questionEl.textContent="Oglądaj reklamę, aby zobaczyć wynik"; answersEl.innerHTML="";
    setTimeout(()=>{ adFinal.style.display='none'; finishQuiz(); },15000); return;
  }

  adTop.style.display='flex'; adBottom.style.display='flex'; adMid.style.display='none'; adFinal.style.display='none';

  const idx=sessionQuestions[current], q=QUESTIONS[idx];
  questionEl.textContent=q.q; answersEl.innerHTML="";
  q.a.map((ans,i)=>({ans,i})).sort(()=>Math.random()-0.5).forEach(obj=>{
    const b=document.createElement('div'); b.className='btn'; b.textContent=obj.ans;
    b.onclick=()=>answer(obj.i,b,idx);
    answersEl.appendChild(b);
  });
  $.points.textContent=points;
}

function answer(idxAnswer,btn,questionIndex){
  const correct=QUESTIONS[questionIndex].correct;
  if(idxAnswer===correct){ btn.classList.add('good'); $.snd-ding.play().catch(()=>{}); points++; } 
  else{ btn.classList.add('bad'); $.snd-buzzer.play().catch(()=>{}); }
  current++; setTimeout(showQuestion,400);
}

function finishQuiz(){
  $.finalText.textContent=`${points} pkt`;
  $.final.style.display='flex';
}

$.retryBtn.onclick=()=>{ points=0; current=0; sessionQuestions=QUESTIONS.map((q,i)=>i).sort(()=>Math.random()-0.5); $.final.style.display='none'; showQuestion(); };
$.shareBtn.onclick=()=>{ navigator.clipboard.writeText(location.href).then(()=>{alert('Link skopiowany do schowka')}); };
$.endBtn.onclick=()=>{$.final.style.display='none';};

showQuestion();
</script>
</body>
</html>
