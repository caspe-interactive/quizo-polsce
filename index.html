<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Quiz Polska</title>

<!-- REKLAMA GÓRA -->
<script>
(function(s){
  s.dataset.zone='10552577';
  s.src='https://gizokraijaw.net/vignette.min.js';
})(document.head.appendChild(document.createElement('script')));
</script>

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#050b1f;
  color:#fff;
  text-align:center;
}
#app{max-width:600px;margin:auto;padding:15px}
button{
  display:block;
  width:100%;
  margin:10px 0;
  padding:14px;
  font-size:16px;
  border:none;
  border-radius:10px;
  background:#00e5ff;
  color:#000;
  font-weight:bold;
}
button:hover{opacity:.9}
.hidden{display:none}
#ad-mid{margin:15px 0}
</style>
</head>

<body>
<div id="app">

<h2 id="title">Quiz o Polsce</h2>

<div id="start">
<input id="nick" placeholder="Twój nick" style="width:100%;padding:12px;border-radius:10px;border:none;margin-bottom:10px">
<button onclick="startQuiz()">START</button>
</div>

<div id="quiz" class="hidden">
<h3 id="q"></h3>
<div id="answers"></div>
</div>

<div id="end" class="hidden">
<h2>Koniec quizu</h2>
<p id="score"></p>
<button onclick="restart()">Spróbuj jeszcze raz</button>
<button onclick="share()">Poleć znajomemu</button>
<button id="installBtn" class="hidden">Zapisz na ekranie</button>
</div>

<!-- REKLAMA PO 7 PYTANIU -->
<div id="ad-mid"></div>

</div>

<!-- AUDIO -->
<audio id="bg" src="music.mp3" loop></audio>
<audio id="ok" src="ok.mp3" preload="auto"></audio>
<audio id="bad" src="bad.mp3" preload="auto"></audio>

<script>
const questions=[
{q:"Stolica Polski?",a:["Warszawa","Kraków","Gdańsk","Wrocław"],c:0},
{q:"Największy polski port morski?",a:["Gdańsk","Gdynia","Szczecin","Świnoujście"],c:0},
{q:"Największe miasto na południu Polski?",a:["Kraków","Wrocław","Katowice","Łódź"],c:0},
{q:"Polska jest w NATO od?",a:["1999","2004","1990","2001"],c:0},
{q:"Skoczek z medalami olimpijskimi?",a:["Małysz","Stoch","Żyła","Kubacki"],c:1},
{q:"Najdłuższa rzeka?",a:["Wisła","Odra","Bug","Warta"],c:0},
{q:"Najwyższy szczyt?",a:["Rysy","Śnieżka","Giewont","Babia Góra"],c:0},
{q:"Rok niepodległości?",a:["1918","1945","1939","1920"],c:0},
{q:"Hymn Polski?",a:["Mazurek Dąbrowskiego","Rota","Bogurodzica","Oda"],c:0},
{q:"Największe miasto Mazowsza?",a:["Warszawa","Radom","Płock","Siedlce"],c:0}
];

let i=0,pts=0;

const bg=document.getElementById("bg");
bg.volume=0.4;

function startQuiz(){
document.getElementById("start").classList.add("hidden");
document.getElementById("quiz").classList.remove("hidden");
bg.play();
show();
}

function show(){
if(i===7)loadMidAd();
if(i>=questions.length){end();return;}
const q=questions[i];
document.getElementById("q").innerText=q.q;
const a=document.getElementById("answers");
a.innerHTML="";
q.a.forEach((t,idx)=>{
const b=document.createElement("button");
b.innerText=t;
b.onclick=()=>ans(idx);
a.appendChild(b);
});
}

function ans(x){
if(x===questions[i].c){
pts++;
const s=document.getElementById("ok");
s.currentTime=0;s.play();
}else{
const s=document.getElementById("bad");
s.currentTime=0;s.play();
}
i++;
show();
}

function end(){
document.getElementById("quiz").classList.add("hidden");
document.getElementById("end").classList.remove("hidden");
document.getElementById("score").innerText="Wynik: "+pts+"/"+questions.length;
}

function restart(){
location.reload();
}

function share(){
navigator.share?.({title:"Quiz",text:"Sprawdź quiz o Polsce!",url:location.href});
}

function loadMidAd(){
if(document.getElementById("ad-mid").innerHTML!=="")return;
const s=document.createElement("script");
s.dataset.zone="10552582";
s.src="https://gizokraijaw.net/vignette.min.js";
document.getElementById("ad-mid").appendChild(s);
}

/* PWA */
let deferredPrompt;
window.addEventListener("beforeinstallprompt",e=>{
e.preventDefault();
deferredPrompt=e;
document.getElementById("installBtn").classList.remove("hidden");
});
document.getElementById("installBtn").onclick=()=>{
deferredPrompt.prompt();
};
</script>
</body>
</html>
